##Summon the puppet master.
execute at @e[tag=ingame] run summon salmon ~ ~ ~ {CustomNameVisible:1b,Health:80f,Passengers:[{id:"minecraft:evoker",Glowing:1b,CustomNameVisible:1b,Health:100f,SpellTicks:80,CustomName:'{"text":"The Fish Flesh Puppet"}',HandItems:[{id:"minecraft:salmon_bucket",Count:1b,tag:{CanPlaceOn:["#lem.base:all_blocks"],EntityTag:{CustomNameVisible:1b,CustomName:'{"text":"The Puppet Master\'s slightly weaker brother"}'}}},{id:"minecraft:salmon_spawn_egg",Count:1b,tag:{CanPlaceOn:["#lem.base:all_blocks"]}}],HandDropChances:[1.000F,1.000F],ArmorItems:[{},{},{},{id:salmon,Count:1}],ArmorDropChances:[0.000F,0.000F,0.000F,1.000F],active_effects:[{id:"minecraft:jump_boost",amplifier:2b,duration:-1,show_particles:0b},{id:"minecraft:glowing",amplifier:1b,duration:-1,show_particles:0b}],Attributes:[{Name:generic.max_health,Base:100},{Name:generic.follow_range,Base:128}]}],CustomName:'{"text":"The Puppet Master"}',HandItems:[{id:"minecraft:salmon_bucket",Count:1b,tag:{CanPlaceOn:["#lem.base:all_blocks"],EntityTag:{CustomNameVisible:1b,Health:80f,CustomName:'{"text":"The Puppet Master"}',active_effects:[{id:"minecraft:jump_boost",amplifier:3b,duration:-1,show_particles:0b},{id:"minecraft:glowing",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:slow_falling",amplifier:1b,duration:-1,show_particles:0b}],Attributes:[{Name:generic.max_health,Base:80}]}}},{id:golden_apple,Count:1}],HandDropChances:[1.000F,1.000F],ArmorItems:[{id:iron_boots,Count:1},{id:iron_leggings,Count:1},{id:iron_chestplate,Count:1},{id:iron_helmet,Count:1}],ArmorDropChances:[1.000F,1.000F,1.000F,1.000F],active_effects:[{id:"minecraft:jump_boost",amplifier:3b,duration:-1,show_particles:0b},{id:"minecraft:glowing",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:slow_falling",amplifier:1b,duration:-1,show_particles:0b}],Attributes:[{Name:generic.max_health,Base:80}]}

##Warn everyone
tellraw @a[tag=ingame] {"text":"The Puppet Master has been awoken!","color":"dark_purple"}
discordMSG "The Puppet Master has been awoken!"
execute as @a[tag=ingame] at @s run playsound entity.wither.spawn hostile @s ~ ~ ~

##Add this event to player savedata
userconfig @a[tag=ingame] set lem.base:lore_puppet true
userconfig @a[tag=ingame] sync
